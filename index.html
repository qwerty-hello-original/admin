<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lol You Can't Log In</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
  --primary-color: #0066ff;
  --sidebar-width: 280px;
  --sidebar-collapsed-width: 80px;
  --transition-speed: 0.3s;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* GLOBAL */
body {
  font-family: 'Montserrat', sans-serif;
  background: linear-gradient(135deg, #2a2a72 0%, #009ffd 74%);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
}

/* HIDE/SHOW */
.hidden {
  display: none !important;
}

/* LOGIN SCREEN */
#login-screen {
  position: relative;
  width: 100%;
  height: 100vh;
}

.login-container {
  position: absolute;
  transform: translate(-50%, -50%);
  top: 50%;
  left: 50%;
}

.login-form {
  background: rgba(255,255,255,0.15);
  padding: 3em;
  height: 320px;
  border-radius: 20px;
  border-left: 1px solid rgba(255,255,255,0.3);
  border-top: 1px solid rgba(255,255,255,0.3);
  backdrop-filter: blur(10px);
  box-shadow: 20px 20px 40px -6px rgba(0,0,0,0.4);
  text-align: center;
  position: relative;
  transition: all 0.2s ease-in-out;
}

.login-form p {
  font-weight: 500;
  color: #fff;
  opacity: 0.9;
  font-size: 1.4rem;
  margin-top: 0;
  margin-bottom: 40px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
}

.login-form input {
  background: rgba(255,255,255,0.1);
  width: 200px;
  padding: 1em;
  margin-bottom: 2em;
  border: none;
  border-left: 1px solid rgba(255,255,255,0.3);
  border-top: 1px solid rgba(255,255,255,0.3);
  border-radius: 5000px;
  backdrop-filter: blur(5px);
  box-shadow: 4px 4px 60px rgba(0,0,0,0.3);
  color: #fff;
  font-family: Montserrat, sans-serif;
  font-weight: 500;
  transition: all 0.2s ease-in-out;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
}

.login-form input:hover {
  background: rgba(255,255,255,0.2);
  box-shadow: 4px 4px 60px 8px rgba(0,0,0,0.3);
}

.login-form input:focus {
  background: rgba(255,255,255,0.2);
  box-shadow: 4px 4px 60px 8px rgba(0,0,0,0.3);
  outline: none;
}

.login-form input[type="button"] {
  margin-top: 10px;
  width: 150px;
  font-size: 1rem;
  cursor: pointer;
  background: rgba(255,255,255,0.25);
}

.login-form input[type="button"]:active {
  background: rgba(255,255,255,0.35);
}

::placeholder {
  font-family: Montserrat, sans-serif;
  font-weight: 400;
  color: #fff;
  opacity: 0.9;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
}

.drop {
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  border-radius: 10px;
  border-left: 1px solid rgba(255,255,255,0.3);
  border-top: 1px solid rgba(255,255,255,0.3);
  box-shadow: 10px 10px 60px -8px rgba(0,0,0,0.3);
  position: absolute;
  transition: all 0.2s ease;
}

.drop-1 { height: 80px; width: 80px; top: -20px; left: -40px; z-index: -1; }
.drop-2 { height: 80px; width: 80px; bottom: -30px; right: -10px; }
.drop-3 { height: 100px; width: 100px; bottom: 120px; right: -50px; z-index: -1; }
.drop-4 { height: 120px; width: 120px; top: -60px; right: -60px; }
.drop-5 { height: 60px; width: 60px; bottom: 170px; left: 90px; z-index: -1; }

/* APP CONTAINER (DASHBOARD) */
#app {
  width: 100%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.app-container {
  display: flex;
  width: 90%;
  height: 85vh;
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(30px);
  -webkit-backdrop-filter: blur(30px);
  border-radius: 24px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.18);
  overflow: hidden;
}

/* SIDEBAR */
.sidebar {
  width: var(--sidebar-width);
  height: 100%;
  padding: 30px 15px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-right: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  flex-direction: column;
  transition: width var(--transition-speed) ease;
  position: relative;
}

.logo {
  text-align: center;
  margin-bottom: 40px;
}

.logo i {
  font-size: 36px;
  color: #fff;
  opacity: 0.9;
}

.menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.menu li {
  margin-bottom: 8px;
  border-radius: 16px;
  transition: all 0.2s ease;
  position: relative;
  cursor: pointer;
}

.menu li:hover {
  background: rgba(255, 255, 255, 0.2);
}

.menu li.active {
  background: rgba(255, 255, 255, 0.25);
}

.menu li.active::before {
  content: "";
  position: absolute;
  left: -15px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 20px;
  background: var(--primary-color);
  border-radius: 0 4px 4px 0;
}

.menu a {
  display: flex;
  align-items: center;
  color: #fff;
  padding: 12px 16px;
  text-decoration: none;
  font-weight: 500;
  letter-spacing: 0.3px;
}

.menu a i {
  font-size: 20px;
  margin-right: 14px;
  min-width: 22px;
  text-align: center;
}

/* Apple-style liquid hover */
.menu li::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 16px;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0);
  transition: box-shadow 0.3s ease;
}

.menu li:hover::after {
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.3);
}

/* PROFILE */
.profile {
  margin-top: auto;
  display: flex;
  align-items: center;
  padding: 16px;
  background: rgba(255, 255, 255, 0.12);
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.avatar {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  overflow: hidden;
  margin-right: 12px;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.user-info h3 {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 2px;
}

.user-info p {
  font-size: 12px;
  opacity: 0.8;
}

/* CONTENT */
.content {
  flex: 1;
  padding: 40px;
  overflow-y: auto;
}

.content header {
  margin-bottom: 30px;
}

.content header h1 {
  font-size: 32px;
  font-weight: 600;
  margin-bottom: 8px;
}

.content header p {
  font-size: 16px;
  opacity: 0.8;
}

/* CARDS */
.card-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 24px;
  margin-top: 30px;
}

.card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 24px;
  display: flex;
  align-items: center;
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.card-icon {
  width: 50px;
  height: 50px;
  background: var(--primary-color);
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 16px;
}

.card-icon i {
  font-size: 22px;
}

.card-info h3 {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 4px;
}

.card-info p {
  font-size: 14px;
  opacity: 0.8;
}

/* PAGES */
.page {
  display: none;
}

.page.active {
  display: block;
}

/* SIMPLE TABLES */
.table-wrapper {
  margin-top: 20px;
  background: rgba(255,255,255,0.08);
  border-radius: 16px;
  padding: 16px;
  border: 1px solid rgba(255,255,255,0.15);
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

th, td {
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.15);
  text-align: left;
}

th {
  background: rgba(255,255,255,0.08);
}

/* FORMS IN PAGES */
.page form input,
.page form button {
  margin: 6px 4px;
  padding: 8px 10px;
  border-radius: 999px;
  border: none;
  font-family: inherit;
}

.page form input {
  background: rgba(255,255,255,0.1);
  color: #fff;
}

.page form button {
  background: var(--primary-color);
  color: #fff;
  cursor: pointer;
}

/* HISTORY LIST */
#history-list {
  list-style: none;
  margin-top: 16px;
  max-height: 260px;
  overflow-y: auto;
}

#history-list li {
  padding: 6px 0;
  border-bottom: 1px solid rgba(255,255,255,0.15);
  font-size: 0.9rem;
}

/* RESPONSIVE */
@media (max-width: 1024px) {
  .sidebar {
    width: var(--sidebar-collapsed-width);
  }
  .menu a span,
  .user-info {
    display: none;
  }
  .profile {
    justify-content: center;
  }
  .avatar {
    margin-right: 0;
  }
  .content {
    padding: 30px;
  }
}

@media (max-width: 768px) {
  .app-container {
    width: 95%;
    height: 90vh;
  }
  .card-container {
    grid-template-columns: 1fr;
  }
}
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="login-screen">
  <div class="login-container">
    <form class="login-form" onsubmit="return false;">
      <p>Welcome</p>
      <input id="login-username" type="text" placeholder="Username"><br>
      <input id="login-password" type="password" placeholder="Password"><br>
      <input type="button" value="Sign in" onclick="handleLogin()"><br>
    </form>

    <div class="drops">
      <div class="drop drop-1"></div>
      <div class="drop drop-2"></div>
      <div class="drop drop-3"></div>
      <div class="drop drop-4"></div>
      <div class="drop drop-5"></div>
    </div>
  </div>
</div>

<!-- APP (DASHBOARD) -->
<div id="app" class="hidden">
  <div class="app-container">
    <aside class="sidebar">
      <div class="logo">
        <i class="fab fa-apple"></i>
      </div>
      <nav class="menu">
        <ul>
          <li class="active" data-page="home">
            <a href="javascript:void(0);">
              <i class="fas fa-home"></i><span>Home</span>
            </a>
          </li>
          <li data-page="creds">
            <a href="javascript:void(0);">
              <i class="fas fa-key"></i><span>Daily Credentials</span>
            </a>
          </li>
          <li data-page="history">
            <a href="javascript:void(0);">
              <i class="fas fa-clock-rotate-left"></i><span>History</span>
            </a>
          </li>
          <li class="admin-only" data-page="users">
            <a href="javascript:void(0);">
              <i class="fas fa-users-cog"></i><span>Manage Users</span>
            </a>
          </li>
          <li class="admin-only" data-page="logs">
            <a href="javascript:void(0);">
              <i class="fas fa-list"></i><span>Login Logs</span>
            </a>
          </li>
          <li>
            <a href="javascript:void(0);" onclick="logout();">
              <i class="fas fa-right-from-bracket"></i><span>Logout</span>
            </a>
          </li>
        </ul>
      </nav>
      <div class="profile">
        <div class="avatar">
          <img src="https://images.unsplash.com/photo-1519531537033-bf085fbfd6da?q=80&w=580&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D?auto=format&fit=crop&w=100&q=80" alt="Profile">
        </div>
        <div class="user-info">
          <h3 id="profile-name">User</h3>
          <p id="profile-role">Role</p>
        </div>
      </div>
    </aside>

    <main class="content">
      <header>
        <h1>Welcome back, <span id="welcome-name">User</span></h1>
        <p>Here’s an overview of your account and system activity.</p>
      </header>

      <!-- HOME PAGE -->
      <section id="page-home" class="page active">
        <div class="card-container">
          <div class="card">
            <div class="card-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="card-info">
              <h3 id="card-total-users">0</h3>
              <p>Total Users</p>
            </div>
          </div>

          <div class="card">
            <div class="card-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="card-info">
              <h3 id="card-last-login">—</h3>
              <p>Last Login</p>
            </div>
          </div>

          <div class="card">
            <div class="card-icon">
              <i class="fas fa-key"></i>
            </div>
            <div class="card-info">
              <h3 id="card-today-creds">—</h3>
              <p>Today’s Credentials</p>
            </div>
          </div>

          <div class="card">
            <div class="card-icon">
              <i class="fas fa-list"></i>
            </div>
            <div class="card-info">
              <h3 id="card-log-count">0</h3>
              <p>Login Logs Count</p>
            </div>
          </div>
        </div>
      </section>

      <!-- DAILY CREDENTIALS PAGE -->
      <section id="page-creds" class="page">
        <h2>Today’s Credentials</h2>
        <p style="opacity:0.8;font-size:0.95rem;">These rotate daily and are stored locally in your browser.</p>
        <div class="card" style="margin-top:20px;max-width:420px;">
          <div class="card-icon">
            <i class="fas fa-user-lock"></i>
          </div>
          <div class="card-info">
            <h3 id="today-username">—</h3>
            <p>Username</p>
            <h3 id="today-password" style="margin-top:10px;">—</h3>
            <p>Password</p>
          </div>
        </div>
      </section>

      <!-- HISTORY PAGE -->
      <section id="page-history" class="page">
        <h2>Past Daily Credentials</h2>
        <p style="opacity:0.8;font-size:0.95rem;">History of generated daily usernames and passwords.</p>
        <div class="table-wrapper">
          <ul id="history-list"></ul>
        </div>
      </section>

      <!-- MANAGE USERS PAGE (ADMIN ONLY) -->
      <section id="page-users" class="page">
        <h2>Manage Users</h2>
        <form onsubmit="event.preventDefault(); addUser();">
          <input id="new-username" placeholder="Username">
          <input id="new-password" placeholder="Password">
          <input id="new-displayname" placeholder="Display Name">
          <input id="new-role" placeholder="Role">
          <button type="submit">Add User</button>
        </form>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Username</th>
                <th>Display Name</th>
                <th>Role</th>
                <th>Password</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-table-body"></tbody>
          </table>
        </div>
      </section>

      <!-- LOGIN LOGS PAGE (ADMIN ONLY) -->
      <section id="page-logs" class="page">
        <h2>Login Logs</h2>
        <p style="opacity:0.8;font-size:0.95rem;">Stored locally: username, display name, time, browser, OS, device.</p>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Username</th>
                <th>Display Name</th>
                <th>Date & Time</th>
                <th>Browser</th>
                <th>OS</th>
                <th>Device</th>
              </tr>
            </thead>
            <tbody id="logs-table-body"></tbody>
          </table>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
const ADMIN_USERNAME = "admin";
const ADMIN_PASSWORD = "Waheguru@1984";

let currentUser = null;

// INIT
function initApp() {
  let users = JSON.parse(localStorage.getItem("users"));
  if (!Array.isArray(users)) users = [];

  // Ensure default admin exists
  const adminExists = users.some(u => u.username === ADMIN_USERNAME);
  if (!adminExists) {
    users.push({
      username: ADMIN_USERNAME,
      password: ADMIN_PASSWORD,
      displayName: "Admin",
      role: "Admin"
    });
  }

  localStorage.setItem("users", JSON.stringify(users));

  if (!localStorage.getItem("loginLogs")) {
    localStorage.setItem("loginLogs", JSON.stringify([]));
  }
  if (!localStorage.getItem("dailyCreds")) {
    localStorage.setItem("dailyCreds", JSON.stringify({}));
  }
}
initApp();

// LOGIN
function handleLogin() {
  const u = document.getElementById("login-username").value.trim();
  const p = document.getElementById("login-password").value;

  const users = JSON.parse(localStorage.getItem("users")) || [];
  const match = users.find(user => user.username === u && user.password === p);

  if (!match) {
    alert("Incorrect username or password");
    return;
  }

  currentUser = match;
  logLogin(match);
  enterApp();
}

// LOG LOGIN
function logLogin(user) {
  const logs = JSON.parse(localStorage.getItem("loginLogs")) || [];
  const now = new Date();

  logs.push({
    username: user.username,
    displayName: user.displayName || "",
    datetime: now.toLocaleString(),
    browser: navigator.userAgent,
    os: navigator.platform,
    device: /Mobi|Android/i.test(navigator.userAgent) ? "Mobile" : "Desktop"
  });

  localStorage.setItem("loginLogs", JSON.stringify(logs));
}

// ENTER APP
function enterApp() {
  document.getElementById("login-screen").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");

  document.getElementById("profile-name").textContent = currentUser.displayName || currentUser.username;
  document.getElementById("profile-role").textContent = currentUser.role || "User";
  document.getElementById("welcome-name").textContent = currentUser.displayName || currentUser.username;

  // Show/hide admin-only items
  const isAdmin = (currentUser.role === "Admin");
  document.querySelectorAll(".admin-only").forEach(el => {
    el.style.display = isAdmin ? "block" : "none";
  });

  generateDailyCredentials();
  updateHomeCards();
  renderUsers();
  renderLogs();
  renderHistory();

  setupMenu();
}

// MENU
function setupMenu() {
  const items = document.querySelectorAll(".menu li[data-page]");
  items.forEach(li => {
    li.onclick = () => {
      items.forEach(i => i.classList.remove("active"));
      li.classList.add("active");
      const page = li.getAttribute("data-page");
      showPage(page);
    };
  });
}

function showPage(pageName) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  const pageEl = document.getElementById("page-" + pageName);
  if (pageEl) pageEl.classList.add("active");

  if (pageName === "home") {
    updateHomeCards();
  } else if (pageName === "creds") {
    generateDailyCredentials();
  } else if (pageName === "history") {
    renderHistory();
  } else if (pageName === "users") {
    renderUsers();
  } else if (pageName === "logs") {
    renderLogs();
  }
}

// DAILY CREDENTIALS
function randomString(len) {
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  let out = "";
  for (let i = 0; i < len; i++) out += chars[Math.floor(Math.random() * chars.length)];
  return out;
}

function generateDailyCredentials() {
  const today = new Date().toLocaleDateString();
  const saved = JSON.parse(localStorage.getItem("dailyCreds")) || {};

  if (!saved[today]) {
    const username = randomString(6);
    const password = randomString(8);
    saved[today] = { username, password };
    localStorage.setItem("dailyCreds", JSON.stringify(saved));
  }

  const creds = saved[today];
  document.getElementById("today-username").textContent = creds.username;
  document.getElementById("today-password").textContent = creds.password;
}

// HISTORY
function renderHistory() {
  const saved = JSON.parse(localStorage.getItem("dailyCreds")) || {};
  const list = document.getElementById("history-list");
  list.innerHTML = "";

  Object.keys(saved).sort().forEach(date => {
    const li = document.createElement("li");
    li.textContent = `${date} → ${saved[date].username} / ${saved[date].password}`;
    list.appendChild(li);
  });
}

// HOME CARDS
function updateHomeCards() {
  const users = JSON.parse(localStorage.getItem("users")) || [];
  const logs = JSON.parse(localStorage.getItem("loginLogs")) || [];
  const daily = JSON.parse(localStorage.getItem("dailyCreds")) || {};
  const today = new Date().toLocaleDateString();

  document.getElementById("card-total-users").textContent = users.length.toString();
  document.getElementById("card-log-count").textContent = logs.length.toString();

  const lastLog = logs.length ? logs[logs.length - 1].datetime : "—";
  document.getElementById("card-last-login").textContent = lastLog;

  if (daily[today]) {
    document.getElementById("card-today-creds").textContent =
      `${daily[today].username} / ${daily[today].password}`;
  } else {
    document.getElementById("card-today-creds").textContent = "—";
  }
}

// USERS (ADMIN)
function addUser() {
  if (!currentUser || currentUser.role !== "Admin") {
    alert("Only admin can add users.");
    return;
  }

  const username = document.getElementById("new-username").value.trim();
  const password = document.getElementById("new-password").value;
  const displayName = document.getElementById("new-displayname").value.trim();
  const role = document.getElementById("new-role").value.trim();

  if (!username || !password) {
    alert("Username and password are required.");
    return;
  }

  let users = JSON.parse(localStorage.getItem("users")) || [];
  if (users.some(u => u.username.toLowerCase() === username.toLowerCase())) {
    alert("User already exists.");
    return;
  }

  users.push({
    username,
    password,
    displayName: displayName || username,
    role: role || "User"
  });

  localStorage.setItem("users", JSON.stringify(users));

  document.getElementById("new-username").value = "";
  document.getElementById("new-password").value = "";
  document.getElementById("new-displayname").value = "";
  document.getElementById("new-role").value = "";

  renderUsers();
  updateHomeCards();
}

function renderUsers() {
  if (!currentUser || currentUser.role !== "Admin") return;

  const users = JSON.parse(localStorage.getItem("users")) || [];
  const tbody = document.getElementById("users-table-body");
  tbody.innerHTML = "";

  users.forEach(u => {
    const tr = document.createElement("tr");

    const isAdminUser = (u.username === ADMIN_USERNAME);

    tr.innerHTML = `
      <td>${u.username}</td>
      <td>${u.displayName || ""}</td>
      <td>${u.role || ""}</td>
      <td>${u.password}</td>
      <td>
        <button onclick="editUser('${u.username}')">Edit</button>
        ${isAdminUser ? "" : `<button onclick="deleteUser('${u.username}')">Delete</button>`}
      </td>
    `;
    tbody.appendChild(tr);
  });
}

function deleteUser(username) {
  if (!currentUser || currentUser.role !== "Admin") return;
  if (username === ADMIN_USERNAME) {
    alert("You cannot delete the default admin user.");
    return;
  }

  let users = JSON.parse(localStorage.getItem("users")) || [];
  users = users.filter(u => u.username !== username);
  localStorage.setItem("users", JSON.stringify(users));
  renderUsers();
  updateHomeCards();
}

function editUser(username) {
  if (!currentUser || currentUser.role !== "Admin") return;

  let users = JSON.parse(localStorage.getItem("users")) || [];
  const idx = users.findIndex(u => u.username === username);
  if (idx === -1) return;

  const user = users[idx];

  const newDisplayName = prompt("Display Name:", user.displayName || "");
  if (newDisplayName === null) return;

  const newRole = prompt("Role:", user.role || "");
  if (newRole === null) return;

  user.displayName = newDisplayName.trim() || user.username;
  user.role = newRole.trim() || "User";

  users[idx] = user;
  localStorage.setItem("users", JSON.stringify(users));

  if (currentUser.username === username) {
    currentUser = user;
    document.getElementById("profile-name").textContent = currentUser.displayName;
    document.getElementById("profile-role").textContent = currentUser.role;
    document.getElementById("welcome-name").textContent = currentUser.displayName;
  }

  renderUsers();
}

// LOGS (ADMIN)
function renderLogs() {
  if (!currentUser || currentUser.role !== "Admin") return;

  const logs = JSON.parse(localStorage.getItem("loginLogs")) || [];
  const tbody = document.getElementById("logs-table-body");
  tbody.innerHTML = "";

  logs.slice().reverse().forEach(log => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${log.username}</td>
      <td>${log.displayName || ""}</td>
      <td>${log.datetime}</td>
      <td>${log.browser}</td>
      <td>${log.os}</td>
      <td>${log.device}</td>
    `;
    tbody.appendChild(tr);
  });
}

// LOGOUT
function logout() {
  currentUser = null;
  document.getElementById("app").classList.add("hidden");
  document.getElementById("login-screen").classList.remove("hidden");
  document.getElementById("login-username").value = "";
  document.getElementById("login-password").value = "";
}
</script>

</body>
</html>

